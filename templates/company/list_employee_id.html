{% extends 'base/base.html' %}
{% load static %}
{% load mptt_tags %}

{% block content %}
    <h3>Сотрудники уровня: {{ root_employee_id|add:"1" }}</h3>
    <ul>
        {% recursetree nodes %}
            <li class="table table-success table-striped">
                <a class="btn btn__dark" href="{% url 'company:list-employee-id' node.id %}">
                    {{ node.name.full_name }}
                    {{ node.position }}
                    {{ node.salary }}
                </a>
                {% if node.is_root_node %}
                        {% if not node.is_leaf_node %}
                            <ul class="children">
                                {{ children }}
                            </ul>
                    {% endif %}
                {% else %}
                    {% if not node.is_leaf_node %}
                        {% if current_employee.id == node.id %}
                            <ul class="children">
                                {{ children }}
                            </ul>
                        {% elif node.level < current_employee.level %}
                            <ul class="children">
                                {{ children }}
                            </ul>
                        {% endif %}
                    {% endif %}
                {% endif %}
            </li>
        {% endrecursetree %}
    </ul>
{% endblock %}
